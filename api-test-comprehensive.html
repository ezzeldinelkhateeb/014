<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± API Ø§Ù„Ø´Ø§Ù…Ù„ - Ø¨Ù†ÙŠ Ù†Øª</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
            direction: rtl;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .section h3 {
            color: #0066cc;
            margin-top: 0;
        }
        .test-button {
            background-color: #0066cc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            transition: background-color 0.3s;
        }
        .test-button:hover {
            background-color: #0052a3;
        }
        .test-button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        .success {
            color: #008000;
            font-weight: bold;
        }
        .error {
            color: #cc0000;
            font-weight: bold;
        }
        .warning {
            color: #ff8800;
            font-weight: bold;
        }
        .result {
            margin-top: 10px;
            padding: 15px;
            border-radius: 5px;
            background-color: white;
            border-left: 4px solid #0066cc;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 400px;
            overflow-y: auto;
        }
        .input-group {
            margin: 10px 0;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .input-group input, .input-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 8px;
        }
        .status-success { background-color: #008000; }
        .status-error { background-color: #cc0000; }
        .status-warning { background-color: #ff8800; }
        .status-info { background-color: #0066cc; }
        .summary {
            background-color: #e7f3ff;
            border: 1px solid #0066cc;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± API Ø§Ù„Ø´Ø§Ù…Ù„ - Ø¨Ù†ÙŠ Ù†Øª</h1>
            <p>Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ù…ÙŠØ¹ endpoints ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ù…Ù„Ù‡Ø§ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­</p>
        </div>

        <div class="summary">
            <h3>ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø­Ø§Ù„Ø©</h3>
            <div id="summary">ÙŠØ±Ø¬Ù‰ Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ø®Øµ</div>
        </div>

        <div class="section">
            <h3>ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h3>
            <div class="input-group">
                <label for="apiKey">Ù…ÙØªØ§Ø­ API:</label>
                <input type="password" id="apiKey" placeholder="Ø£Ø¯Ø®Ù„ Ù…ÙØªØ§Ø­ Bunny API">
            </div>
            <div class="input-group">
                <label for="libraryId">Ù…Ø¹Ø±Ù Ø§Ù„Ù…ÙƒØªØ¨Ø© (Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±):</label>
                <input type="text" id="libraryId" placeholder="Ø£Ø¯Ø®Ù„ Ù…Ø¹Ø±Ù Ù…ÙƒØªØ¨Ø© ØµØ§Ù„Ø­">
            </div>
            <button class="test-button" onclick="runAllTests()">ğŸ”„ ØªØ´ØºÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</button>
            <button class="test-button" onclick="clearResults()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
        </div>

        <div class="grid">
            <div class="section">
                <h3>ğŸ” Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ</h3>
                <button class="test-button" onclick="testDiagnostics()">ØªØ´Ø®ÙŠØµ Ø§Ù„Ù†Ø¸Ø§Ù…</button>
                <button class="test-button" onclick="testAuthCheck()">ÙØ­Øµ Ø§Ù„ØªÙÙˆÙŠØ¶</button>
                <button class="test-button" onclick="testAllEndpoints()">ÙØ­Øµ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª</button>
                <div id="diagnostics-result" class="result" style="display: none;"></div>
            </div>

            <div class="section">
                <h3>ğŸ“š Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª</h3>
                <button class="test-button" onclick="testLibraries()">Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª</button>
                <button class="test-button" onclick="testLibraryDetails()">ØªÙØ§ØµÙŠÙ„ Ù…ÙƒØªØ¨Ø©</button>
                <div id="libraries-result" class="result" style="display: none;"></div>
            </div>

            <div class="section">
                <h3>ğŸ“ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</h3>
                <button class="test-button" onclick="testCollections()">Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</button>
                <button class="test-button" onclick="testCreateCollection()">Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù…ÙˆØ¹Ø©</button>
                <div id="collections-result" class="result" style="display: none;"></div>
            </div>

            <div class="section">
                <h3>ğŸ¥ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</h3>
                <button class="test-button" onclick="testVideos()">Ø¬Ù„Ø¨ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</button>
                <button class="test-button" onclick="testCreateVideo()">Ø¥Ù†Ø´Ø§Ø¡ ÙÙŠØ¯ÙŠÙˆ</button>
                <div id="videos-result" class="result" style="display: none;"></div>
            </div>

            <div class="section">
                <h3>ğŸ“‹ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø´ÙŠØª</h3>
                <button class="test-button" onclick="testSheetUpdate()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´ÙŠØª</button>
                <div id="sheets-result" class="result" style="display: none;"></div>
            </div>

            <div class="section">
                <h3>â¬†ï¸ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø±ÙØ¹</h3>
                <div class="input-group">
                    <label for="testFile">Ø§Ø®ØªØ± Ù…Ù„Ù Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±:</label>
                    <input type="file" id="testFile" accept="video/*">
                </div>
                <button class="test-button" onclick="testUpload()">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø±ÙØ¹</button>
                <div id="upload-result" class="result" style="display: none;"></div>
            </div>
        </div>
    </div>

    <script>
        let testResults = {};
        
        function getApiKey() {
            return document.getElementById('apiKey').value || 'your-default-key';
        }
        
        function getLibraryId() {
            return document.getElementById('libraryId').value || '123456';
        }
        
        function showResult(elementId, content, status = 'info') {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            element.innerHTML = content;
            element.className = `result ${status}`;
        }
        
        function updateSummary() {
            const total = Object.keys(testResults).length;
            const passed = Object.values(testResults).filter(r => r.success).length;
            const failed = total - passed;
            
            const summaryHtml = `
                <div style="display: flex; justify-content: space-around; text-align: center;">
                    <div>
                        <strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong><br>
                        <span style="font-size: 24px; color: #0066cc;">${total}</span>
                    </div>
                    <div>
                        <strong>Ù†Ø¬Ø­</strong><br>
                        <span style="font-size: 24px; color: #008000;">${passed}</span>
                    </div>
                    <div>
                        <strong>ÙØ´Ù„</strong><br>
                        <span style="font-size: 24px; color: #cc0000;">${failed}</span>
                    </div>
                    <div>
                        <strong>Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­</strong><br>
                        <span style="font-size: 24px; color: #0066cc;">${total > 0 ? Math.round((passed/total)*100) : 0}%</span>
                    </div>
                </div>
            `;
            document.getElementById('summary').innerHTML = summaryHtml;
        }
        
        async function makeRequest(url, options = {}) {
            const apiKey = getApiKey();
            const headers = {
                'Content-Type': 'application/json',
                'AccessKey': apiKey,
                'accesskey': apiKey,
                ...options.headers
            };
            
            try {
                const response = await fetch(url, {
                    ...options,
                    headers
                });
                
                const responseText = await response.text();
                let data;
                
                try {
                    data = JSON.parse(responseText);
                } catch (e) {
                    data = { rawResponse: responseText };
                }
                
                return {
                    ok: response.ok,
                    status: response.status,
                    statusText: response.statusText,
                    data,
                    headers: Object.fromEntries(response.headers.entries())
                };
            } catch (error) {
                return {
                    ok: false,
                    error: error.message
                };
            }
        }
        
        async function testDiagnostics() {
            try {
                const result = await makeRequest('/api/diagnostics');
                testResults.diagnostics = { success: result.ok };
                
                const content = `
Ø§Ù„Ø­Ø§Ù„Ø©: ${result.ok ? 'âœ… Ù†Ø¬Ø­' : 'âŒ ÙØ´Ù„'}
Ø§Ù„ÙƒÙˆØ¯: ${result.status}
Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:
${JSON.stringify(result.data, null, 2)}
                `;
                showResult('diagnostics-result', content, result.ok ? 'success' : 'error');
            } catch (error) {
                testResults.diagnostics = { success: false };
                showResult('diagnostics-result', `Ø®Ø·Ø£: ${error.message}`, 'error');
            }
            updateSummary();
        }
        
        async function testAuthCheck() {
            try {
                const result = await makeRequest('/api/auth-check');
                testResults.authCheck = { success: result.ok };
                
                const content = `
Ø§Ù„Ø­Ø§Ù„Ø©: ${result.ok ? 'âœ… Ù†Ø¬Ø­' : 'âŒ ÙØ´Ù„'}
Ø§Ù„ÙƒÙˆØ¯: ${result.status}
Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:
${JSON.stringify(result.data, null, 2)}
                `;
                showResult('diagnostics-result', content, result.ok ? 'success' : 'error');
            } catch (error) {
                testResults.authCheck = { success: false };
                showResult('diagnostics-result', `Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„ØªÙÙˆÙŠØ¶: ${error.message}`, 'error');
            }
            updateSummary();
        }
        
        async function testAllEndpoints() {
            try {
                const result = await makeRequest('/api/test-endpoints');
                testResults.allEndpoints = { success: result.ok };
                
                const content = `
Ø§Ù„Ø­Ø§Ù„Ø©: ${result.ok ? 'âœ… Ù†Ø¬Ø­' : 'âŒ ÙØ´Ù„'}
Ø§Ù„ÙƒÙˆØ¯: ${result.status}
Ø§Ù„Ù†ØªØ§Ø¦Ø¬:
${JSON.stringify(result.data, null, 2)}
                `;
                showResult('diagnostics-result', content, result.ok ? 'success' : 'error');
            } catch (error) {
                testResults.allEndpoints = { success: false };
                showResult('diagnostics-result', `Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª: ${error.message}`, 'error');
            }
            updateSummary();
        }
        
        async function testLibraries() {
            try {
                const result = await makeRequest('/api/proxy/base/videolibrary');
                testResults.libraries = { success: result.ok };
                
                const content = `
Ø§Ù„Ø­Ø§Ù„Ø©: ${result.ok ? 'âœ… Ù†Ø¬Ø­' : 'âŒ ÙØ´Ù„'}
Ø§Ù„ÙƒÙˆØ¯: ${result.status}
Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª: ${result.data?.items?.length || 0}
Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:
${JSON.stringify(result.data, null, 2)}
                `;
                showResult('libraries-result', content, result.ok ? 'success' : 'error');
            } catch (error) {
                testResults.libraries = { success: false };
                showResult('libraries-result', `Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª: ${error.message}`, 'error');
            }
            updateSummary();
        }
        
        async function testLibraryDetails() {
            const libraryId = getLibraryId();
            try {
                const result = await makeRequest(`/api/proxy/base/videolibrary/${libraryId}`);
                testResults.libraryDetails = { success: result.ok };
                
                const content = `
Ø§Ù„Ø­Ø§Ù„Ø©: ${result.ok ? 'âœ… Ù†Ø¬Ø­' : 'âŒ ÙØ´Ù„'}
Ø§Ù„ÙƒÙˆØ¯: ${result.status}
Ù…Ø¹Ø±Ù Ø§Ù„Ù…ÙƒØªØ¨Ø©: ${libraryId}
Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:
${JSON.stringify(result.data, null, 2)}
                `;
                showResult('libraries-result', content, result.ok ? 'success' : 'error');
            } catch (error) {
                testResults.libraryDetails = { success: false };
                showResult('libraries-result', `Ø®Ø·Ø£ ÙÙŠ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙƒØªØ¨Ø©: ${error.message}`, 'error');
            }
            updateSummary();
        }
        
        async function testCollections() {
            const libraryId = getLibraryId();
            try {
                const result = await makeRequest(`/api/proxy/video/library/${libraryId}/collections`);
                testResults.collections = { success: result.ok };
                
                const content = `
Ø§Ù„Ø­Ø§Ù„Ø©: ${result.ok ? 'âœ… Ù†Ø¬Ø­' : 'âŒ ÙØ´Ù„'}
Ø§Ù„ÙƒÙˆØ¯: ${result.status}
Ù…Ø¹Ø±Ù Ø§Ù„Ù…ÙƒØªØ¨Ø©: ${libraryId}
Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª: ${result.data?.items?.length || 0}
Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:
${JSON.stringify(result.data, null, 2)}
                `;
                showResult('collections-result', content, result.ok ? 'success' : 'error');
            } catch (error) {
                testResults.collections = { success: false };
                showResult('collections-result', `Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª: ${error.message}`, 'error');
            }
            updateSummary();
        }
        
        async function testCreateCollection() {
            const libraryId = getLibraryId();
            const collectionName = `Test Collection ${Date.now()}`;
            
            try {
                const result = await makeRequest(`/api/proxy/video/library/${libraryId}/collections`, {
                    method: 'POST',
                    body: JSON.stringify({ name: collectionName })
                });
                testResults.createCollection = { success: result.ok };
                
                const content = `
Ø§Ù„Ø­Ø§Ù„Ø©: ${result.ok ? 'âœ… Ù†Ø¬Ø­' : 'âŒ ÙØ´Ù„'}
Ø§Ù„ÙƒÙˆØ¯: ${result.status}
Ø§Ø³Ù… Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©: ${collectionName}
Ù…Ø¹Ø±Ù Ø§Ù„Ù…ÙƒØªØ¨Ø©: ${libraryId}
Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:
${JSON.stringify(result.data, null, 2)}
                `;
                showResult('collections-result', content, result.ok ? 'success' : 'error');
            } catch (error) {
                testResults.createCollection = { success: false };
                showResult('collections-result', `Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©: ${error.message}`, 'error');
            }
            updateSummary();
        }
        
        async function testVideos() {
            const libraryId = getLibraryId();
            try {
                const result = await makeRequest(`/api/proxy/video/library/${libraryId}/videos`);
                testResults.videos = { success: result.ok };
                
                const content = `
Ø§Ù„Ø­Ø§Ù„Ø©: ${result.ok ? 'âœ… Ù†Ø¬Ø­' : 'âŒ ÙØ´Ù„'}
Ø§Ù„ÙƒÙˆØ¯: ${result.status}
Ù…Ø¹Ø±Ù Ø§Ù„Ù…ÙƒØªØ¨Ø©: ${libraryId}
Ø¹Ø¯Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª: ${result.data?.items?.length || 0}
Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:
${JSON.stringify(result.data, null, 2)}
                `;
                showResult('videos-result', content, result.ok ? 'success' : 'error');
            } catch (error) {
                testResults.videos = { success: false };
                showResult('videos-result', `Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª: ${error.message}`, 'error');
            }
            updateSummary();
        }
        
        async function testCreateVideo() {
            const libraryId = getLibraryId();
            const videoTitle = `Test Video ${Date.now()}`;
            
            try {
                const result = await makeRequest('/api/proxy/create-video', {
                    method: 'POST',
                    body: JSON.stringify({ 
                        libraryId: libraryId,
                        title: videoTitle 
                    })
                });
                testResults.createVideo = { success: result.ok };
                
                const content = `
Ø§Ù„Ø­Ø§Ù„Ø©: ${result.ok ? 'âœ… Ù†Ø¬Ø­' : 'âŒ ÙØ´Ù„'}
Ø§Ù„ÙƒÙˆØ¯: ${result.status}
Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆ: ${videoTitle}
Ù…Ø¹Ø±Ù Ø§Ù„Ù…ÙƒØªØ¨Ø©: ${libraryId}
Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:
${JSON.stringify(result.data, null, 2)}
                `;
                showResult('videos-result', content, result.ok ? 'success' : 'error');
            } catch (error) {
                testResults.createVideo = { success: false };
                showResult('videos-result', `Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ: ${error.message}`, 'error');
            }
            updateSummary();
        }
        
        async function testSheetUpdate() {
            try {
                const result = await makeRequest('/api/update-sheet', {
                    method: 'POST',
                    body: JSON.stringify({
                        spreadsheetId: 'test-spreadsheet-id',
                        sheetName: 'Test Sheet',
                        values: [['Test', 'Data'], ['Row 2', 'Col 2']],
                        range: 'A1:B2'
                    })
                });
                testResults.sheetUpdate = { success: result.ok };
                
                const content = `
Ø§Ù„Ø­Ø§Ù„Ø©: ${result.ok ? 'âœ… Ù†Ø¬Ø­' : 'âŒ ÙØ´Ù„'}
Ø§Ù„ÙƒÙˆØ¯: ${result.status}
Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:
${JSON.stringify(result.data, null, 2)}
                `;
                showResult('sheets-result', content, result.ok ? 'success' : 'error');
            } catch (error) {
                testResults.sheetUpdate = { success: false };
                showResult('sheets-result', `Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´ÙŠØª: ${error.message}`, 'error');
            }
            updateSummary();
        }
        
        async function testUpload() {
            const fileInput = document.getElementById('testFile');
            const file = fileInput.files[0];
            
            if (!file) {
                showResult('upload-result', 'ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±', 'warning');
                return;
            }
            
            try {
                // Test upload preparation
                const content = `
ğŸ”„ Ø§Ø®ØªØ¨Ø§Ø± Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù:
Ø§Ù„Ù…Ù„Ù: ${file.name}
Ø§Ù„Ø­Ø¬Ù…: ${(file.size / (1024 * 1024)).toFixed(2)} MB
Ø§Ù„Ù†ÙˆØ¹: ${file.type}

Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ø°Ø§ Ø§Ø®ØªØ¨Ø§Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© ÙÙ‚Ø·
Ø§Ù„Ø±ÙØ¹ Ø§Ù„ÙØ¹Ù„ÙŠ ÙŠØªØ·Ù„Ø¨ ØªÙ†ÙÙŠØ° ÙƒØ§Ù…Ù„ Ù„Ø®Ø¯Ù…Ø© TUS
                `;
                
                testResults.upload = { success: true };
                showResult('upload-result', content, 'success');
            } catch (error) {
                testResults.upload = { success: false };
                showResult('upload-result', `Ø®Ø·Ø£ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø±ÙØ¹: ${error.message}`, 'error');
            }
            updateSummary();
        }
        
        async function runAllTests() {
            // Clear previous results
            testResults = {};
            
            // Run all tests sequentially with delays
            const tests = [
                testDiagnostics,
                testAuthCheck,
                testAllEndpoints,
                testLibraries,
                testLibraryDetails,
                testCollections,
                testVideos,
                testSheetUpdate
            ];
            
            for (let i = 0; i < tests.length; i++) {
                try {
                    await tests[i]();
                    // Small delay between tests
                    await new Promise(resolve => setTimeout(resolve, 500));
                } catch (error) {
                    console.error(`Test ${i} failed:`, error);
                }
            }
            
            // Show final summary
            setTimeout(() => {
                alert(`Ø§ÙƒØªÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª!\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${Object.keys(testResults).length}\nÙ†Ø¬Ø­: ${Object.values(testResults).filter(r => r.success).length}`);
            }, 1000);
        }
        
        function clearResults() {
            testResults = {};
            const resultElements = document.querySelectorAll('.result');
            resultElements.forEach(el => el.style.display = 'none');
            document.getElementById('summary').innerHTML = 'ÙŠØ±Ø¬Ù‰ Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ø®Øµ';
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Ø§Ø®ØªØ¨Ø§Ø± API Ø§Ù„Ø´Ø§Ù…Ù„ Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ´ØºÙŠÙ„');
        });
    </script>
</body>
</html>
